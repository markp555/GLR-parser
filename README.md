# Лабораторная работа №5: GLR-парсер

## Стек парсера
Файлы стека хранятся в папке stack (она создается автоматически при ее отсутствии)

Свертки в алгоритме исполняются в первую очередь (каждый шаг выполняется свертка по всем путям из текущей вершины). Затем перемещение выполняется для всех вершин одновременно, что считается единым шагом. Рядом с вершинами в стеке отображаются действия, которые будут выполняться с ними на следующем шаге. Для каждого шага указывается текущая позиция и токен, находящийся в этой позиции. Вершины стека имеют круглую форму. В круглых скобках у каждого узла указана вершина дерева разбора (см. ниже), на которую он указывает.

## Дерево разбора
Результат будет сохранен в папку с именем "tree" в текущей директории (при необходимости, как и с папкой "stack" будет создан).

При отображении упакованного дерева разбора может быть потерян порядок дочерних вершин для данной вершины из-за их большого количества. В программе они упорядочены правильно. Упакованные вершины отображаются кластерами, где каждый путь будет представлен как узел исходного графа

## Вход программы

Для выполнения программы необходим ввод грамматики (без эпсилон правил) и самого текста для парсинга (текст можно как ввести вручную так и взять из файла)
Грамматика должна находится в файле (путь к нему можно указать) и удовлетворять следующим требованиям:
- Разделение правил пробелами
- Нельзя использовать символ @ из-за особенностей реализации
В грамматике поддерживается использование '|' (или)

Для запуска выполните следующую команду
- `py .\program\lab5.py ...`
- `python .\program\lab5.py ...`

Аргументы программы (весь список можно получить через флаг -h)
- `-g` `-grammar` путь к файлу с грамматикой
- `-i` `--input` предложение для парсинга, токены отделяются пробелами
- `-f` `--file` путь к файлу с предложением на вход парсера

## Пример запуска
```
py .\program\lab5.py -g grammars/arith_grammar.txt -i "id * id + id" -a
```

## Выходные данные
В папках stack и tree выводятся описания на языке dot, для преобразования их в картинки необходимо выполнить эту команду для Linux (требуется установленный graphviz):
```
mkdir stack/images | forfiles /P stack /m "*.dot" /c "cmd /c dot -Tpng @file -o images/@fname.png"
```
Или можно посмотреть результат работы программы в онлайн graphviz: https://dreampuf.github.io/GraphvizOnline/

Для просмотра графа вставьте в левой панели текст из нужного Вам файла .dot

![image](https://github.com/markp555/GLR-parser/assets/123451252/4bf8f5fa-9063-40bf-9e7e-cf2e138cfe18)

(итоговый результат программы для выражения "id + id * id")

В правой панели будет отображаться результат. 
- Для дерева разбора это текущее состояние парсера ("sentence") и само дерево разбора
- Для стека это текущая операция, номер символа и сам стек парсера

Имеется возможность скачать получившуюся картинку с помощью кнопки download
